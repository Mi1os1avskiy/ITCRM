{% extends 'base.html.twig' %}

{% block title %} {{ title }} {% endblock %}

{% set side_menu_item = 'clients:new_client' %}

{% block main %}

	<clients-module inline-template>
		<clients-create inline-template v-cloak>
			<div class="pb-20">
				<div class="py-4 px-8 space-y-2 bg-gray-50">
					<nav class="flex items-center space-x-4 text-sm text-gray-500 font-medium">
						<a href="{{ path ('clients') }}">Клиенты</a>
						<div class="-rotate-90">
							{{ source('assets/images/arrow.svg') }}
						</div>
						<p>Добавить клиента</p>
					</nav>
					<div class="h-9 flex items-center font-semibold text-lg">{{ title }}</div>
				</div>

				<form class="pt-6 pb-4 px-8 space-y-5">
					<h3 class="text-lg font-medium leading-6">Персональные данные</h3>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Имя <span class="text-red-500">*</span></p>
						</div>
						<div class="w-80">
							<div class="relative">
								<input v-model="personalData.firstname" class="inputs block w-full text-sm" type="text" placeholder="Иван" autocomplete="given-name"
								       :class="{'bg-red-50 placeholder-red-300': $form['personalData.firstname'] && $form['personalData.firstname'].$dirty && !$form['personalData.firstname'].$valid}">
								<div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3" v-if="$form['personalData.firstname'] && $form['personalData.firstname'].$dirty && !$form['personalData.firstname'].$valid">
									{{ source('assets/images/error.svg') }}
								</div>
							</div>
							<div v-if="$form['personalData.firstname'] && $form['personalData.firstname'].$dirty && !$form['personalData.firstname'].$valid">
								<p class="mt-2 text-sm text-red-500" v-for="item in $form['personalData.firstname'].$errors">${item}</p>
							</div>
						</div>
					</div>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Фамилия</p>
						</div>
						<div class="w-80">
							<div class="relative">
								<input v-model="personalData.lastname" class="inputs block w-full text-sm" type="text" placeholder="Доу" autocomplete="family-name"
								       :class="{'bg-red-50 placeholder-red-300': $form['personalData.lastname'] && $form['personalData.lastname'].$dirty && !$form['personalData.lastname'].$valid}">
								<div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3" v-if="$form['personalData.lastname'] && $form['personalData.lastname'].$dirty && !$form['personalData.lastname'].$valid">
									{{ source('assets/images/error.svg') }}
								</div>
							</div>
							<div v-if="$form['personalData.lastname'] && $form['personalData.lastname'].$dirty && !$form['personalData.lastname'].$valid">
								<p class="mt-2 text-sm text-red-500" v-for="item in $form['personalData.lastname'].$errors">${item}</p>
							</div>
						</div>
					</div>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Название компании</p>
						</div>
						<div class="w-80">
							<input type="text" autocomplete="off" class="inputs block w-full text-sm" placeholder="Майкрософт">
						</div>
					</div>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Email <span class="text-red-500">*</span></p>
						</div>
						<div class="w-80">
							<div class="relative">
								<input v-model="personalData.email" class="inputs block w-full text-sm" placeholder="email@email.com" type="email" autocomplete="off"
								       :class="{'bg-red-50 placeholder-red-300': $form['personalData.email'] && $form['personalData.email'].$dirty && !$form['personalData.email'].$valid}">
								<div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3" v-if="$form['personalData.email'] && $form['personalData.email'].$dirty && !$form['personalData.email'].$valid">
									{{ source('assets/images/error.svg') }}
								</div>
							</div>
							<div v-if="$form['personalData.email'] && $form['personalData.email'].$dirty && !$form['personalData.email'].$valid">
								<p class="mt-2 text-sm text-red-500" v-for="item in $form['personalData.email'].$errors">${item}</p>
							</div>
						</div>
					</div>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Номер телефона</p>
						</div>
						<div class="w-80">
							<div class="relative">
								<input v-model="personalData.phone" class="inputs block w-full text-sm" type="tel" autocomplete="off" placeholder="+1"
								       :class="{'bg-red-50 placeholder-red-300': $form['personalData.phone'] && $form['personalData.phone'].$dirty && !$form['personalData.phone'].$valid}">
								<div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3" v-if="$form['personalData.phone'] && $form['personalData.phone'].$dirty && !$form['personalData.phone'].$valid">
									{{ source('assets/images/error.svg') }}
								</div>
							</div>
							<div v-if="$form['personalData.phone'] && $form['personalData.phone'].$dirty && !$form['personalData.phone'].$valid">
								<p class="mt-2 text-sm text-red-500" v-for="item in $form['personalData.phone'].$errors">${item}</p>
							</div>
						</div>
					</div>

					<hr>

					{% set statuses = {'Active': 'green', 'Inactive': 'gray', 'Closed': 'gray'} %}

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Статус аккаунта</p>
						</div>
						<div class="relative w-80">
							<button type="button" class="w-full flex rounded-md ring-1 ring-gray-300 py-2 px-3 space-x-2 text-sm hover:bg-gray-50" aria-expanded="false" aria-expanded-autohide>
								{{ source('assets/images/circles/green-400.svg') }}
								<div class="grow text-left pointer-events-none">Active</div>
								{{ source('assets/images/arrow.svg') }}
							</button>

							<ul class="dropdown w-full overflow-auto">
								{% for val, css in statuses %}
									<li class="relative cursor-default select-none" role="option">
										<button type="button" class="flex items-center w-full py-2 px-3 space-x-2 hover:bg-gray-50">
											<div class="h-5 w-5 p-[5px]">
												<div class="h-2.5 w-2.5 flex-shrink-0 rounded-full bg-{{ css }}-400"></div>
											</div>
											<p class="text-sm">{{ val }}</p>
										</button>
									</li>
								{% endfor %}
							</ul>
						</div>
					</div>

					<hr>

					<div class="h-9 flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Верификация email</p>
						</div>
						<div class="flex items-center space-x-2">
							<input id="email_verif" type="checkbox" class="checkbox">
							<label for="email_verif" class="text-sm">Верифицирован</label>
						</div>
					</div>

					<hr>

					<div class="pt-5 space-y-5">
						<div class="flex space-x-6 text-lg font-medium leading-6">
							<div class="w-1/2">Ограничения</div>
							<div class="w-1/2">Разрешения</div>
						</div>
						<div class="flex space-x-6 text-gray-700 text-sm font-medium">
							<div class="w-1/2 p-5 bg-gray-50 border-b border-gray-300 rounded-xl">
								<div class="flex items-center justify-between pb-5 border-b">
									<div>Запретить пополнение баланса</div>
									<label for="toggle_balance" class="relative flex items-center cursor-pointer">
										<input type="checkbox" id="toggle_balance" class="sr-only">
										<div class="toggle_body"></div>
										<div class="toggle_dot"></div>
									</label>
								</div>
								<div class="flex items-center justify-between py-5 border-b">
									<div>Запретить оплату инвойсов</div>
									<label for="toggle_invoicing" class="relative flex items-center cursor-pointer">
										<input type="checkbox" id="toggle_invoicing" class="sr-only">
										<div class="toggle_body"></div>
										<div class="toggle_dot"></div>
									</label>
								</div>
								<div class="flex items-center justify-between pt-5">
									<div>Запретить создание новых заказов и продлений</div>
									<label for="toggle_orders" class="relative flex items-center cursor-pointer">
										<input type="checkbox" id="toggle_orders" class="sr-only">
										<div class="toggle_body"></div>
										<div class="toggle_dot"></div>
									</label>
								</div>
							</div>
							<div class="w-1/2 p-5 bg-gray-50 border-b border-gray-300 rounded-xl">
								<div class="flex items-center justify-between pb-5 border-b">
									<div>Разрешить отмену услуг в ЛК со штрафом</div>
									<label for="toggle_services" class="relative flex items-center cursor-pointer">
										<input type="checkbox" id="toggle_services" class="sr-only">
										<div class="toggle_body"></div>
										<div class="toggle_dot"></div>
									</label>
								</div>
							</div>
						</div>
					</div>

					<hr>

					<div class="flex space-x-6">
						<div class="w-[344px] flex">
							<p class="self-center text-sm font-medium text-gray-700">Пароль <span class="text-red-500">*</span></p>
						</div>

						<div class="w-[320px] flex ml-6">
							<div class="relative flex items-center flex-grow items-stretch focus-within:z-10">
								<input v-model="password" :type="isPasswordHidden ? 'password' : 'text'" placeholder="•••••••••••••"
								       class="inputs block w-full pr-10 text-sm"
								       :class="{'bg-red-50 placeholder-red-300': $form['password'] && $form['password'].$dirty && !$form['password'].$valid}">
								<button @click="toggleShowHide()" type="button">
									<i v-if="isPasswordHidden" class="absolute top-2 right-3">
										{{ source('assets/images/eye-slash.svg') }}
									</i>
									<i v-if="!isPasswordHidden" class="absolute top-2 right-3">
										{{ source('assets/images/eye.svg') }}
									</i>
								</button>
							</div>
							<div v-if="$form['password'] && $form['password'].$dirty && !$form['password'].$valid">
								<p class="mt-2 text-sm text-red-500" v-for="item in $form['password'].$errors">${item}</p>
							</div>
						</div>

						<button @click="generateNewPassword()" type="button" class="ml-4 py-2 px-4 rounded-md ring-1 ring-gray-300 font-medium text-gray-700 text-sm hover:bg-gray-50">Сгенерировать</button>
					</div>

					<hr>

					<div class="flex justify-center">
						<button @click="clientAdd()" type="button" class="py-2 px-4 rounded-md bg-indigo-600 text-sm font-medium text-white hover:bg-indigo-700">Добавить клиента</button>
					</div>
				</form>
			</div>
		</clients-create>
	</clients-module>

{% endblock %}
