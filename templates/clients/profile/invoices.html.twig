{% extends 'clients/clients.base.html.twig' %}

{% set currentTab = 'invoices' %}

{% block content %}

    <profile-settings inline-template>

    {% block control %}

        <div class="pt-6 px-8">
            <div class="flex items-center justify-between flex-shrink-0">
                <a href="{{ path('billing_new_invoice') }}" class="flex items-center py-2 pl-3 pr-4 space-x-2 border border-transparent rounded-md bg-indigo-600 shadow-sm hover:bg-indigo-700">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.75 4.75C10.75 4.33579 10.4142 4 10 4C9.58579 4 9.25 4.33579 9.25 4.75V9.25H4.75C4.33579 9.25 4 9.58579 4 10C4 10.4142 4.33579 10.75 4.75 10.75L9.25 10.75V15.25C9.25 15.6642 9.58579 16 10 16C10.4142 16 10.75 15.6642 10.75 15.25V10.75L15.25 10.75C15.6642 10.75 16 10.4142 16 10C16 9.58579 15.6642 9.25 15.25 9.25H10.75V4.75Z" fill="white"/>
                    </svg>
                    <span class="text-white text-sm font-medium">Добавить</span>
                </a>

                <div class="flex items-center space-x-2">
	                <div class="w-60 relative">
		                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
			                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
				                <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
			                </svg>
		                </div>
		                <input class="block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-3 leading-5 placeholder-gray-400 text-sm" placeholder="Поиск по ID" type="text">
	                </div>
                    <button @click="invoicesFilters()" type="button" class="inline-flex items-center py-2 pl-3 pr-4 space-x-2 rounded-md border border-gray-300 shadow-sm hover:bg-gray-50">
	                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
		                    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.47102 3.46746C6.27039 3.15991 8.11739 3 10 3C11.8826 3 13.7296 3.15991 15.529 3.46746C15.8007 3.51389 16 3.75747 16 4.04302V5.8223C16 6.28643 15.8222 6.73155 15.5057 7.05974L11.9943 10.7013C11.6778 11.0295 11.5 11.4746 11.5 11.9387V14.3004C11.5 14.832 11.267 15.3348 10.8667 15.6669L9.41389 16.8722C9.24505 17.0122 9.01372 17.0396 8.81883 16.9424C8.62394 16.8453 8.5 16.6409 8.5 16.4167V11.9387C8.5 11.4746 8.32221 11.0295 8.00574 10.7013L4.49426 7.05974C4.17779 6.73155 4 6.28643 4 5.8223V4.04302C4 3.75747 4.19934 3.51389 4.47102 3.46746Z" fill="#6B7280"/>
	                    </svg>
                        <span class="text-gray-700 text-sm font-medium">Фильтры</span>
                    </button>
                </div>
            </div>
        </div>

    {% endblock %}

    </profile-settings>

    {% block table %}

        <div class="py-4 px-8">
	        <div class="min-w-full overflow-hidden border align-middle rounded-t-lg">

                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr class="bg-gray-50 border-b border-gray-300 text-gray-900 text-sm">
                            <th class="py-3 pl-6 pr-3 text-left font-medium">ID</th>
                            <th class="p-3 text-left font-medium">Статус</th>
                            <th class="p-3 text-left font-medium whitespace-nowrap">Способ оплаты</th>
                            <th class="p-3 text-left font-medium whitespace-nowrap">Дата выписки</th>
                            <th class="p-3 text-left font-medium whitespace-nowrap">Оплатить до</th>
                            <th class="py-3 pl-3 pr-6 text-right font-medium">Сумма</th>
                        </tr>
                    </thead>

                    <tbody class="divide-y divide-gray-200 bg-white">

                        {% for invoice in invoices %}
                            <tr class="text-sm {% if invoice.status == 'Draft' %}bg-gray-50{% endif %}">
                                <td class="py-4 pl-6 pr-3 text-left font-medium text-gray-900 {% if invoice.status == 'Draft' %}text-gray-500{% endif %}">
                                    <a {% if invoice.status == 'Draft' %}href="{{ path('billing_edit_draft') }}"{% else %}href="{{ path('invoice_overview') }}"{% endif %} class="hover:text-indigo-700">{{ invoice.id }}</a>
                                </td>
                                <td class="py-4 px-3 text-left">
                                    {% for val, css in invoice_statuses %}
                                        {% if invoice.status == val %}
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-{{ css }}-100 text-{{ css }}-800">{{ val }}</span>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td class="py-4 px-3 text-gray-500 text-left">{{ invoice.payment }}</td>
                                <td class="py-4 px-3 text-gray-500 text-left">{{ invoice.excerpt }}</td>
                                <td class="py-4 px-3 text-gray-500 text-left">{{ invoice.paydate }}</td>
                                <td class="py-4 pl-3 pr-6 text-gray-500 text-right font-medium">${{ invoice.amount|number_format('2', '.', '') }}</td>
                            </tr>
                        {% endfor %}

                    </tbody>
                </table>
            </div>

	        {% include 'parts/pagination.html.twig' %}

        </div>

    {% endblock %}

    {% block modals %}
        {% include 'clients/profile/modals/clients.invoices.filters.html.twig' %}
    {% endblock %}

{% endblock %}
