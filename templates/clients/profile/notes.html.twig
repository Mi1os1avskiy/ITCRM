{% extends 'clients/clients.base.html.twig' %}

{% set currentTab = 'notes' %}

{% block content %}

    <profile-settings inline-template>

        <div class="py-6 px-8 space-y-6">

	        <div class="relative rounded-md ring-1 ring-gray-300 shadow-sm">

		        {% include 'parts/text.editor.head.html.twig' %}

		        <div class="px-6 py-4 space-y-4">
			        <input class="w-full border-0 focus:outline-none text-sm placeholder-gray-400" placeholder="Содержание заметки">

			        <button type="button" class="flex items-center space-x-2 py-2 px-3 bg-gray-50 rounded-full hover:bg-gray-200">
				        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
					        <path fill-rule="evenodd" clip-rule="evenodd" d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM10.75 6.75C10.75 6.33579 10.4142 6 10 6C9.58579 6 9.25 6.33579 9.25 6.75V9.25H6.75C6.33579 9.25 6 9.58579 6 10C6 10.4142 6.33579 10.75 6.75 10.75H9.25V13.25C9.25 13.6642 9.58579 14 10 14C10.4142 14 10.75 13.6642 10.75 13.25V10.75H13.25C13.6642 10.75 14 10.4142 14 10C14 9.58579 13.6642 9.25 13.25 9.25H10.75V6.75Z" fill="#9CA3AF"/>
				        </svg>
				        <span class="text-sm font-medium text-gray-500">Прикрепить файл</span>
			        </button>
		        </div>
	        </div>

	        <div class="flex justify-end space-x-4">
		        <div class="flex items-center space-x-3">
			        <input type="checkbox" id="fix_note" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
			        <label for="fix_note" class="text-gray-500 text-sm truncate">Закрепить</label>
		        </div>
		        <button @click="noteAdd()" type="button" class="py-2 px-4 rounded-md border border-transparent bg-indigo-600 font-medium text-sm text-white shadow-sm hover:bg-indigo-700">Добавить заметку</button>
	        </div>

	        <hr>

            {% block notes %}

	            <div class="space-y-3">

                    {% for item in clients_data %}
                        {% if item.id == userID %}
                            {% for note in item.notes %}

                                <div class="px-6 bg-yellow-50 rounded-md">
                                    <div class="flex justify-between items-center py-5">
                                        <div>
                                            <div class="flex items-center space-x-1">
                                                {% if note.status %}
	                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
		                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10ZM10 5C10.4142 5 10.75 5.33579 10.75 5.75V10.25C10.75 10.6642 10.4142 11 10 11C9.58579 11 9.25 10.6642 9.25 10.25V5.75C9.25 5.33579 9.58579 5 10 5ZM10 15C10.5523 15 11 14.5523 11 14C11 13.4477 10.5523 13 10 13C9.44771 13 9 13.4477 9 14C9 14.5523 9.44771 15 10 15Z" fill="#F97316"/>
	                                                </svg>
                                                {% endif %}
                                                <p class="text-gray-900 font-medium">Заметка от {{ note.user }}</p>
                                            </div>
                                            <div class="text-xs text-yellow-800">{{ note.date }}, {{ note.time }} {{ note.loc }}</div>
                                        </div>
	                                    <div class="flex items-center space-x-1">
		                                    <button type="button" class="p-2.5 rounded-md hover:bg-yellow-100">
			                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
				                                    <path d="M5.29885 12.8829L4.03706 16.0374C3.8738 16.4455 4.27884 16.8506 4.68699 16.6873L7.84146 15.4255C8.34443 15.2243 8.80128 14.9231 9.18433 14.5401L14.0088 9.71589L11.0088 6.7159L6.18433 11.5401C5.80128 11.9231 5.50003 12.38 5.29885 12.8829Z" fill="#1F2937"/>
				                                    <path d="M11.7159 6.00881L14.7159 9.00881L16.1035 7.62132C16.9319 6.79289 16.9319 5.44975 16.1035 4.62132C15.2751 3.79289 13.9319 3.79289 13.1035 4.62132L11.7159 6.00881Z" fill="#1F2937"/>
			                                    </svg>
		                                    </button>
		                                    <button @click="noteDelete()" type="button" class="p-2.5 rounded-md hover:bg-yellow-100">
			                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
				                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.02788 3C7.84661 3 6.88899 3.95761 6.88899 5.13889V5.4832C6.27044 5.54311 5.65701 5.62069 5.04922 5.71545C4.7309 5.76507 4.51308 6.06335 4.56271 6.38167C4.61234 6.69999 4.91062 6.91781 5.22894 6.86819L5.34398 6.85047L5.99847 15.0317C6.0874 16.1432 7.01542 17 8.13055 17H11.8695C12.9846 17 13.9126 16.1432 14.0016 15.0317L14.6561 6.85043L14.7714 6.86819C15.0898 6.91781 15.388 6.69999 15.4377 6.38167C15.4873 6.06335 15.2695 5.76507 14.9511 5.71545C14.3433 5.62068 13.7298 5.5431 13.1112 5.48319V5.13889C13.1112 3.95761 12.1536 3 10.9723 3H9.02788ZM10.0002 5.33333C10.653 5.33333 11.3013 5.35295 11.9445 5.39165V5.13889C11.9445 4.60194 11.5093 4.16666 10.9723 4.16666H9.02788C8.49094 4.16666 8.05566 4.60194 8.05566 5.13889V5.39166C8.69893 5.35296 9.34729 5.33333 10.0002 5.33333ZM9.06181 8.21999C9.04526 7.80611 8.69632 7.48401 8.28243 7.50057C7.86855 7.51712 7.54645 7.86606 7.56301 8.27994L7.79635 14.1133C7.81291 14.5272 8.16185 14.8492 8.57573 14.8327C8.98961 14.8161 9.31171 14.4672 9.29515 14.0533L9.06181 8.21999ZM12.4374 8.27994C12.4539 7.86606 12.1318 7.51712 11.7179 7.50057C11.3041 7.48401 10.9551 7.80611 10.9386 8.21999L10.7052 14.0533C10.6887 14.4672 11.0108 14.8161 11.4247 14.8327C11.8385 14.8492 12.1875 14.5271 12.204 14.1133L12.4374 8.27994Z" fill="#1F2937"/>
			                                    </svg>
		                                    </button>
	                                    </div>
                                    </div>

	                                <div class="pb-5 space-y-4">
		                                {% for unit in note.text %}
			                                <div class="text-sm text-gray-700">{{ unit }}</div>
		                                {% endfor %}

		                                {% if note.file %}
			                                <button class="py-2 px-3 bg-yellow-100 hover:bg-yellow-200 rounded-full flex items-center">
				                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					                                <path d="M7 3.5C7 2.67157 7.67157 2 8.5 2H12.3787C12.7765 2 13.158 2.15804 13.4393 2.43934L16.5607 5.56066C16.842 5.84197 17 6.2235 17 6.62132V12.5C17 13.3284 16.3284 14 15.5 14H14.5V10.6213C14.5 9.82567 14.1839 9.06261 13.6213 8.5L10.5 5.37868C9.93739 4.81607 9.17433 4.5 8.37868 4.5H7V3.5Z" fill="#D97706"/>
					                                <path d="M4.5 6C3.67157 6 3 6.67157 3 7.5V16.5C3 17.3284 3.67157 18 4.5 18H11.5C12.3284 18 13 17.3284 13 16.5V10.6213C13 10.2235 12.842 9.84197 12.5607 9.56066L9.43934 6.43934C9.15804 6.15804 8.7765 6 8.37868 6H4.5Z" fill="#D97706"/>
				                                </svg>
				                                <span class="ml-3 text-sm text-gray-800 font-medium">{{ note.file }}</span>
			                                </button>
		                                {% endif %}
	                                </div>
                                </div>

                            {% endfor %}
                        {% endif %}
                    {% endfor %}

                </div>

            {% endblock %}

        </div>

    </profile-settings>

    {% block modals %}
	    {% include 'clients/profile/modals/clients.notes.delete.html.twig' %}
    {% endblock %}

{% endblock %}
