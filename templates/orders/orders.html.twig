{% extends 'base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block main %}

	<orders-module inline-template>

		<div class="flex flex-1 flex-col">
			<main class="flex-1 mb-24">

				{% block content %}

					{% block header %}

						<div class="bg-gray-50 mx-auto px-4 sm:px-6 lg:px-8">
							<div class="flex py-4 justify-between">
								<div class="flex items-center font-semibold text-lg">
									{{ title }}
								</div>
								<div class="flex items-center space-x-3">
									<div class="flex rounded-md border border-gray-300">
										<button type="button" class="p-[9px] rounded-md hover:bg-gray-100 focus:z-10 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600">
											<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path fill-rule="evenodd" clip-rule="evenodd" d="M15.3125 11.4236C14.5263 14.3576 11.5104 16.0988 8.57636 15.3127C7.60734 15.053 6.7703 14.5514 6.11058 13.8904L5.79904 13.5789L8.23227 13.5785C8.64649 13.5784 8.98221 13.2425 8.98214 12.8283C8.98206 12.4141 8.64622 12.0784 8.232 12.0785L3.98857 12.0792C3.78965 12.0792 3.5989 12.1583 3.45827 12.299C3.31764 12.4397 3.23866 12.6305 3.23871 12.8294L3.2396 17.0712C3.23968 17.4854 3.57554 17.8211 3.98975 17.821C4.40397 17.821 4.73968 17.4851 4.7396 17.0709L4.73909 14.6403L5.04894 14.9501C5.88997 15.7926 6.95765 16.4318 8.18814 16.7615C11.9224 17.7621 15.7608 15.5461 16.7613 11.8118C16.8686 11.4117 16.6311 11.0005 16.231 10.8932C15.8309 10.786 15.4197 11.0235 15.3125 11.4236ZM16.5414 7.70119C16.682 7.56051 16.761 7.36971 16.761 7.17078L16.7603 2.92883C16.7602 2.51462 16.4244 2.17889 16.0102 2.17896C15.596 2.17902 15.2602 2.51487 15.2603 2.92908L15.2607 5.35995L14.9509 5.05013C14.1099 4.20771 13.042 3.56827 11.8116 3.23859C8.07734 2.238 4.23898 4.45407 3.23839 8.18834C3.13118 8.58844 3.36862 8.99969 3.76872 9.1069C4.16882 9.2141 4.58007 8.97667 4.68728 8.57657C5.47346 5.6425 8.48931 3.9013 11.4234 4.68748C12.3924 4.94714 13.2295 5.44881 13.8892 6.10979L14.2003 6.4209L11.7684 6.4209C11.3542 6.4209 11.0184 6.75669 11.0184 7.1709C11.0184 7.58512 11.3542 7.9209 11.7684 7.9209H16.011C16.2099 7.9209 16.4007 7.84187 16.5414 7.70119Z" fill="#6B7280"/>
											</svg>
										</button>
										<div class="w-16 py-[9px] border-r-2 border-gray-300 text-sm font-medium text-gray-700 cursor-default">10:05</div>
										<button type="button" class="p-[9px] rounded-md hover:bg-gray-100 focus:z-10 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600" aria-expanded="false" aria-expanded-autohide>
											<svg class="pointer-events-none" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path fill-rule="evenodd" clip-rule="evenodd" d="M5.23017 7.20938C5.52875 6.92228 6.00353 6.93159 6.29063 7.23017L10 11.1679L13.7094 7.23017C13.9965 6.93159 14.4713 6.92228 14.7698 7.20938C15.0684 7.49647 15.0777 7.97125 14.7906 8.26983L10.5406 12.7698C10.3992 12.9169 10.204 13 10 13C9.79599 13 9.60078 12.9169 9.45938 12.7698L5.20938 8.26983C4.92228 7.97125 4.93159 7.49647 5.23017 7.20938Z" fill="#6B7280"/>
											</svg>
										</button>
										<ul class="absolute z-10 w-36 top-16 rounded-md bg-white text-sm text-gray-700 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
											<li class="hover:bg-gray-50">
												<button type="button" class="w-full py-3 px-4 text-left">30 секунд</button>
											</li>
											<li class="hover:bg-gray-50">
												<button type="button" class="w-full py-3 px-4 text-left">1 минута</button>
											</li>
											<li class="hover:bg-gray-50">
												<button type="button" class="w-full py-3 px-4 text-left">5 минут</button>
											</li>
											<li class="hover:bg-gray-50">
												<button type="button" class="w-full py-3 px-4 text-left">10 минут</button>
											</li><li class="hover:bg-gray-50">
												<button type="button" class="w-full py-3 px-4 text-left">15 минут</button>
											</li>
										</ul>
									</div>
									<div class="flex items-center">
										<div class="flex-shrink-0">
											<a href="#" class="relative inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-[9px] text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
												<svg class="-ml-1 mr-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
													<path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"/>
												</svg>
												<span>Добавить</span>
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>

					{% endblock %}

					<orders-settings inline-template>

						<div class="mt-4">

							{% block control %}

								<div class="mx-auto px-4 sm:px-6 lg:px-8">
									<div class="flex h-12 mb-4 justify-between">
										<nav class="flex items-center w-64 truncate lg:w-full text-sm text-gray-700">
											<a href="#" class="py-[9px] px-[17px] border rounded-l-md focus:text-indigo-500 focus:bg-indigo-50 focus:border-indigo-500">Все</a>
											<a href="#" class="py-[9px] px-[17px] border focus:text-indigo-500 focus:bg-indigo-50 focus:border-indigo-500">Новые</a>
											<a href="#" class="flex items-center py-[9px] px-[17px] space-x-3 border rounded-r-md focus:text-indigo-500 focus:bg-indigo-50 focus:border-indigo-500">
												<div class="h-2.5 w-2.5 rounded-full bg-green-400"></div>
												<span>Active</span>
											</a>
										</nav>

										<div class="flex items-center space-x-2">
											<button type="button" @click="ordersSpecialSettingsModal()" class="inline-flex items-center rounded-md border border-gray-300 px-4 py-[9px] shadow-sm hover:bg-gray-50 focus:border-indigo-500">
												<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
													<path fill-rule="evenodd" clip-rule="evenodd" d="M7.83922 1.80388C7.9327 1.33646 8.34312 1 8.8198 1H11.1802C11.6569 1 12.0673 1.33646 12.1608 1.80388L12.4913 3.45629C13.1956 3.72458 13.8454 4.10332 14.4196 4.57133L16.0179 4.03065C16.4694 3.8779 16.966 4.06509 17.2043 4.47791L18.3845 6.52207C18.6229 6.93489 18.5367 7.45855 18.1786 7.77322L16.9119 8.88645C16.9699 9.24909 17 9.62103 17 10C17 10.379 16.9699 10.7509 16.9119 11.1135L18.1786 12.2268C18.5367 12.5414 18.6229 13.0651 18.3845 13.4779L17.2043 15.5221C16.966 15.9349 16.4694 16.1221 16.0179 15.9693L14.4196 15.4287C13.8454 15.8967 13.1956 16.2754 12.4913 16.5437L12.1608 18.1961C12.0673 18.6635 11.6569 19 11.1802 19H8.8198C8.34312 19 7.9327 18.6635 7.83922 18.1961L7.50874 16.5437C6.80442 16.2754 6.1546 15.8967 5.58042 15.4287L3.98213 15.9694C3.53059 16.1221 3.034 15.9349 2.79566 15.5221L1.61546 13.4779C1.37712 13.0651 1.4633 12.5415 1.82136 12.2268L3.08808 11.1135C3.03011 10.7509 2.99999 10.379 2.99999 10C2.99999 9.62103 3.03011 9.2491 3.08808 8.88647L1.82136 7.77324C1.4633 7.45857 1.37712 6.93491 1.61546 6.52209L2.79566 4.47793C3.034 4.06511 3.53059 3.87791 3.98213 4.03066L5.58041 4.57134C6.15459 4.10332 6.80442 3.72459 7.50874 3.45629L7.83922 1.80388ZM9.99999 13C11.6568 13 13 11.6569 13 10C13 8.34315 11.6568 7 9.99999 7C8.34314 7 6.99999 8.34315 6.99999 10C6.99999 11.6569 8.34314 13 9.99999 13Z" fill="#6B7280"/>
												</svg>
											</button>
											<div class="flex items-center">
												<div class="w-64 max-w-xl lg:max-w-xs">
													<div class="relative">
														<div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
															<svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
																<path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
															</svg>
														</div>
														<input name="search" class="block w-full rounded-md border border-gray-300 bg-white py-[9px] pl-10 pr-3 leading-5 placeholder-gray-400 focus:border-indigo-500 focus:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm" placeholder="Поиск по Сумме или IP" type="search">
													</div>
												</div>
											</div>
											<button @click="ordersFilters()" type="button" class="inline-flex items-center rounded-md border border-gray-300 pl-[15px] pr-[17px] py-[9px] shadow-sm hover:bg-gray-50 focus:border-indigo-500">
												<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
													<path fill-rule="evenodd" clip-rule="evenodd" d="M4.47102 3.46746C6.27039 3.15991 8.11739 3 10 3C11.8826 3 13.7296 3.15991 15.529 3.46746C15.8007 3.51389 16 3.75747 16 4.04302V5.8223C16 6.28643 15.8222 6.73155 15.5057 7.05974L11.9943 10.7013C11.6778 11.0295 11.5 11.4746 11.5 11.9387V14.3004C11.5 14.832 11.267 15.3348 10.8667 15.6669L9.41389 16.8722C9.24505 17.0122 9.01372 17.0396 8.81883 16.9424C8.62394 16.8453 8.5 16.6409 8.5 16.4167V11.9387C8.5 11.4746 8.32221 11.0295 8.00574 10.7013L4.49426 7.05974C4.17779 6.73155 4 6.28643 4 5.8223V4.04302C4 3.75747 4.19934 3.51389 4.47102 3.46746Z" fill="#6B7280"/>
												</svg>
												<span class="ml-2 text-sm text-gray-700">Фильтры</span>
											</button>
										</div>
									</div>
								</div>

							{% endblock %}

							{% block table %}

								<div class="hidden sm:block">
									<div class="mx-auto px-4 sm:px-6 lg:px-8">
										<div class="mt-2 border rounded-t-lg overflow-hidden overflow-x-auto">
											<table class="min-w-full">
												<thead class="border-b border-gray-300 bg-gray-50 rounded-lg ">
												<tr class="text-gray-900 text-sm font-medium">
													<th class="px-6 py-3 text-left font-medium whitespace-nowrap" scope="col">ID - Тариф - Локация</th>
													<th class="px-6 py-3 text-left font-medium" scope="col">Создан</th>
													<th class="px-6 py-3 text-left font-medium" scope="col">Клиент</th>
													<th class="px-6 py-3 text-left font-medium whitespace-nowrap" scope="col">Метод оплаты</th>
													<th class="px-6 py-3 text-left font-medium" scope="col">Сумма</th>
													<th class="px-6 py-3 text-left font-medium whitespace-nowrap" scope="col">Статус инвойса</th>
													<th class="px-6 py-3 text-left font-medium whitespace-nowrap" scope="col">Статус заказа</th>
												</tr>
												</thead>

												<tbody class=" divide-y divide-gray-200">

												{% for order in orders %}

													<tr class="text-sm {% if order.invoice_status == 'Paid' and order.order_status == 'Pending' %}bg-yellow-50{% endif %}">
														<td class="whitespace-nowrap px-6 py-4 text-gray-900 font-medium {% if order.invoice_status == 'Paid' and order.order_status == 'Pending' %}inline-block box-border border-l-[3px] border-red-600{% endif %}">
															<a href="#" class="font-medium hover:text-indigo-700">{{ order.id }} - {{ order.tariff}} - {{ order.loc }}</a>
														</td>
														<td class="whitespace-nowrap px-6 py-4 text-gray-500">{{ order.created_date }}, {{ order.created_time }}</td>
														<td class="whitespace-nowrap px-6 py-4 text-gray-500">{{ order.client_name }}</td>
														<td class="whitespace-nowrap px-6 py-4 text-gray-500">{{ order.pay_method }}</td>
														<td class="whitespace-nowrap px-6 py-4 text-gray-500">${{ order.amount|number_format('2', '.') }}</td>
														<td class="px-6 py-4">
															{% for val, css in invoice_statuses %}
																{% if val == order.invoice_status %}
																	<div class="w-fit py-0.5 px-2.5 rounded-xl bg-{{ css }}-100 text-{{ css }}-800 text-xs">{{ order.invoice_status }}</div>
																{% endif %}
															{% endfor %}
														</td>
														<td class="px-6 py-4 {% if order.invoice_status == 'Paid' and order.order_status == 'Pending' %}block box-border border-r-[3px] border-red-600{% endif %}">
															{% for val, css in order_statuses %}
																{% if val == order.order_status %}
																	<div class="w-fit py-0.5 px-2.5 rounded-xl bg-{{ css }}-{% if val == 'In progress' %}200{% else %}100{% endif%} text-{{ css }}-800 text-xs">{{ order.order_status }}</div>
																{% endif %}
															{% endfor %}
														</td>
													</tr>

												{% endfor %}

												</tbody>
											</table>
										</div>
										<div class="-mt-px border rounded-b-lg bg-gray-50 border-t py-4 px-6">
											<div class="flex flex-1 justify-between sm:hidden">
												<a href="#" class="relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Previous</a>
												<a href="#" class="relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50">Next</a>
											</div>
											<div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
												<div>
													<nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
														<a href="#" class="relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20">
															<span class="sr-only">Previous</span>
															<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
																<path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
															</svg>
														</a>
														<a href="#" aria-current="page" class="relative z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 px-4 py-2 text-sm font-medium text-indigo-600 focus:z-20">1</a>
														<a href="#" class="relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20">2</a>
														<a href="#" class="relative hidden items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20 md:inline-flex">3</a>
														<span class="relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700">...</span>
														<a href="#" class="relative hidden items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20 md:inline-flex">8</a>
														<a href="#" class="relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20">9</a>
														<a href="#" class="relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20">10</a>
														<a href="#" class="relative inline-flex items-center rounded-r-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20">
															<span class="sr-only">Next</span>
															<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
																<path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
															</svg>
														</a>
													</nav>
												</div>
												<div class="flex items-center space-x-4">
													<p class="text-sm text-gray-500">1 - {{ orders|length}} из {{ orders|length}}</p>
													<select class="rounded-md border border-gray-300 pl-3 pr-9 py-2 text-sm text-gray-900">
														{% for i in 1..4 %}
															<option>{{ i * 25 }}</option>
														{% endfor %}
													</select>
												</div>
											</div>
										</div>
									</div>
								</div>

							{% endblock %}

						</div>

					</orders-settings>

					{% block modals %}
						{% include 'orders/modals/orders.special.settings.html.twig' %}
						{% include 'orders/modals/orders.filters.html.twig' %}
					{% endblock %}

				{% endblock %}

			</main>
		</div>

	</orders-module>

{% endblock %}
