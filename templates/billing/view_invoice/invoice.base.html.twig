{% extends 'billing/billing.base.html.twig' %}

{% block content %}

	<billing-settings inline-template>

		<div>
			{% block header %}

				<div class="py-4 px-8 space-y-2 bg-gray-50">
					<nav class="flex items-center space-x-4 text-sm text-gray-500 font-medium">
						<a href="{{ path('billing_invoices') }}">Инвойсы</a>
						<svg width="20" height="20" viewBox="0 -1 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" clip-rule="evenodd" d="M7.29289 14.7071C6.90237 14.3166 6.90237 13.6834 7.29289 13.2929L10.5858 10L7.29289 6.70711C6.90237 6.31658 6.90237 5.68342 7.29289 5.29289C7.68342 4.90237 8.31658 4.90237 8.70711 5.29289L12.7071 9.29289C13.0976 9.68342 13.0976 10.3166 12.7071 10.7071L8.70711 14.7071C8.31658 15.0976 7.68342 15.0976 7.29289 14.7071Z" fill="#9CA3AF"/>
						</svg>
						<span>{{ title }} {{ data.invoice_id }}</span>
					</nav>
					<div class="flex items-center justify-between space-x-4">
						{% set res = 0 %}
						{% for i in invoices %}
							{% set res = res + i.amount %}
						{% endfor %}
						<div class="flex items-center space-x-4">
							<p class="font-semibold text-lg">{{ title }} {{ data.invoice_id }}, ${{ res|number_format('2', '.', '') }}</p>
							{% for val, css in invoice_statuses %}
								{% if val == data.invoice_status %}
									<span class="py-0.5 px-3 rounded-xl text-sm font-medium bg-{{ css }}-100 text-{{ css }}-800">{{ val }}</span>
								{% endif %}
							{% endfor %}
						</div>
						<div class="flex space-x-3">
							<button @click="billingInvoiceAddPayment()" type="button" class="flex items-center py-2 pl-3 pr-4 space-x-2 bg-white rounded-md border text-gray-700 text-sm font-medium shadow-sm hover:bg-gray-50">
								<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path d="M10.75 4.75C10.75 4.33579 10.4142 4 10 4C9.58579 4 9.25 4.33579 9.25 4.75V9.25H4.75C4.33579 9.25 4 9.58579 4 10C4 10.4142 4.33579 10.75 4.75 10.75L9.25 10.75V15.25C9.25 15.6642 9.58579 16 10 16C10.4142 16 10.75 15.6642 10.75 15.25V10.75L15.25 10.75C15.6642 10.75 16 10.4142 16 10C16 9.58579 15.6642 9.25 15.25 9.25H10.75V4.75Z" fill="#6B7280"/>
								</svg>
								<span>Добавить платёж</span>
							</button>
							<button @click="billingInvoiceCancel()" type="button" class="flex items-center py-2 pl-3 pr-4 space-x-2 bg-white rounded-md border text-gray-700 text-sm font-medium shadow-sm hover:bg-gray-50">
								<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M9 2C8.62123 2 8.27497 2.214 8.10557 2.55279L7.38197 4H4C3.44772 4 3 4.44772 3 5C3 5.55228 3.44772 6 4 6L4 16C4 17.1046 4.89543 18 6 18H14C15.1046 18 16 17.1046 16 16V6C16.5523 6 17 5.55228 17 5C17 4.44772 16.5523 4 16 4H12.618L11.8944 2.55279C11.725 2.214 11.3788 2 11 2H9ZM7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8V14C9 14.5523 8.55228 15 8 15C7.44772 15 7 14.5523 7 14V8ZM12 7C11.4477 7 11 7.44772 11 8V14C11 14.5523 11.4477 15 12 15C12.5523 15 13 14.5523 13 14V8C13 7.44772 12.5523 7 12 7Z" fill="#6B7280"/>
								</svg>
								<span>Отменить инвойс</span>
							</button>
						</div>
					</div>
				</div>

				<div class="pb-2 px-8 bg-gray-50">
					<div class="flex items-center py-4 px-6 space-x-2 rounded-md border border-gray-300 text-gray-900 text-sm">
						<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
							<rect width="40" height="40" rx="20" fill="#F3F4F6"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 14C15.5 11.5147 17.5147 9.5 20 9.5C22.4853 9.5 24.5 11.5147 24.5 14C24.5 16.4853 22.4853 18.5 20 18.5C17.5147 18.5 15.5 16.4853 15.5 14Z" fill="#374151"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M11.7512 28.1053C11.8286 23.6156 15.492 20 20 20C24.5081 20 28.1716 23.6157 28.2488 28.1056C28.2539 28.4034 28.0823 28.676 27.8117 28.8002C25.4327 29.8918 22.7865 30.5 20.0003 30.5C17.2139 30.5 14.5674 29.8917 12.1883 28.7999C11.9176 28.6757 11.7461 28.4031 11.7512 28.1053Z" fill="#374151"/>
						</svg>
						<div>
							<p class="font-medium">{{ data.invoice_email }}</p>
							<p class="text-gray-500 font-medium">{{ data.invoice_user }}</p>
						</div>
					</div>
				</div>

				<div class="-mb-px flex pt-4 px-8 space-x-8 border-b bg-gray-50">
					<a href="{{ path('invoice_overview') }}" class="pb-[14px] border-b-2 border-transparent text-sm font-medium leading-5 hover:border-gray-300 hover:text-gray-700 {% if currentTab == 'overview' %} border-indigo-500 text-indigo-600 pointer-events-none{% else %} text-gray-500 {% endif %}">Обзор</a>
					<a href="{{ path('invoice_payment_details') }}" class="pb-[14px] border-b-2 border-transparent text-sm font-medium leading-5 hover:border-gray-300 hover:text-gray-700 {% if currentTab == 'details' %} border-indigo-500 text-indigo-600 pointer-events-none{% else %} text-gray-500 {% endif %}">Подробности оплаты</a>
				</div>

			{% endblock %}

			{% block overview %}{% endblock %}

			{% block details %}{% endblock %}

		</div>

	</billing-settings>

	{% block modals %}
		{% include 'billing/modals/billing.invoice.view.add.payment.html.twig' %}
		{% include 'billing/modals/billing.invoice.view.cancel.html.twig' %}
	{% endblock %}

{% endblock %}
